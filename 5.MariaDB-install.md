
## MariaDB:

You can install MariaDB on Rocky Linux by following these steps:


### Install MariaDB:


```
dnf module list mariadb


Last metadata expiration check: 1:46:42 ago on Wed 12 Feb 2025 06:02:40 PM +06.
Rocky Linux 8 - AppStream
Name                                 Stream                                   Profiles                                               Summary
mariadb                              10.3 [d][e]                              client, galera, server [d]                             MariaDB Module
mariadb                              10.5                                     client, galera, server [d]                             MariaDB Module
mariadb                              10.11                                    client, galera, server [d]                             MariaDB Module

Hint: [d]efault, [e]nabled, [x]disabled, [i]nstalled
```


```
dnf module reset mariadb

dnf module enable mariadb

or,

dnf module enable mariadb:10.5
```


```
dnf module list mariadb


Last metadata expiration check: 1:49:27 ago on Wed 12 Feb 2025 06:02:40 PM +06.
Rocky Linux 8 - AppStream
Name                                  Stream                                Profiles                                                Summary
mariadb                               10.3 [d]                              client, galera, server [d]                              MariaDB Module
mariadb                               10.5 [e]                              client, galera, server [d]                              MariaDB Module
mariadb                               10.11                                 client, galera, server [d]                              MariaDB Module

Hint: [d]efault, [e]nabled, [x]disabled, [i]nstalled
```



```
dnf install -y mariadb-server mariadb
```



```
mariadb --version

mariadb  Ver 15.1 Distrib 10.5.27-MariaDB, for Linux (x86_64) using readline 5.1
```


```
mysql -V


mysql  Ver 15.1 Distrib 10.5.27-MariaDB, for Linux (x86_64) using readline 5.1
```


```
mariadb -u root -e 'SELECT VERSION();'

+-----------------+
| VERSION()       |
+-----------------+
| 10.5.27-MariaDB |
+-----------------+
```



If you want to allow remote access, edit the config file: `/etc/my.cnf.d/mariadb-server.cnf` :

```
vim /etc/my.cnf.d/mariadb-server.cnf

[mysqld]
bind-address = 0.0.0.0

```




```
systemctl start mariadb
systemctl enable mariadb
systemctl status mariadb
```



```
mysql -u root
```


```
SELECT User, Host, Password, plugin FROM mysql.user;


+-------------+-----------+----------+-----------------------+
| User        | Host      | Password | plugin                |
+-------------+-----------+----------+-----------------------+
| mariadb.sys | localhost |          | mysql_native_password |
| root        | localhost | invalid  | mysql_native_password |
| mysql       | localhost | invalid  | mysql_native_password |
+-------------+-----------+----------+-----------------------+
```



```
ALTER USER 'root'@'localhost' IDENTIFIED BY 'password';
```


```
SELECT User, Host, Password, plugin FROM mysql.user;

+-------------+-----------+-------------------------------------------+-----------------------+
| User        | Host      | Password                                  | plugin                |
+-------------+-----------+-------------------------------------------+-----------------------+
| mariadb.sys | localhost |                                           | mysql_native_password |
| root        | localhost | *2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19 | mysql_native_password |
| mysql       | localhost | invalid                                   | mysql_native_password |
+-------------+-----------+-------------------------------------------+-----------------------+
```



```
mysql -u root -p

Enter password:
```




```
CREATE DATABASE db1;

CREATE USER 'user1'@'localhost' IDENTIFIED BY 'StrongPassword';

ALTER USER 'user1'@'localhost' IDENTIFIED BY 'mypass';

GRANT ALL PRIVILEGES ON db1.* TO 'user1'@'localhost';

FLUSH PRIVILEGES;
```



#### Grants privileges: 

1. GRANT USAGE ON *.* TO 'user1'@'localhost' IDENTIFIED BY PASSWORD 'hash'
	- USAGE means the user exists but has no privileges at the global level (on *.*).
	- The IDENTIFIED BY PASSWORD 'hash' part means the user's password is stored as a hashed value (*196C101918174951C8015F07FC62BD50C0D00ABD).
	- It does not mean the user has full access to all databases.

2. GRANT ALL PRIVILEGES ON db1.* TO 'user1'@'localhost'
	- ALL PRIVILEGES means user1 has full access to the db1 database.
	- The privileges apply only to db1.* (all tables in db1).
	- The user does not have global privileges (e.g., creating databases, managing users).


```
SHOW GRANTS FOR 'user1'@'localhost';


+--------------------------------------------------------------------------------------------------------------+
| Grants for user1@localhost                                                                                   |
+--------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO `user1`@`localhost` IDENTIFIED BY PASSWORD '*6C8989366EAF75BB670AD8EA7A7FC1176A95CEF4' |
| GRANT ALL PRIVILEGES ON `db1`.* TO `user1`@`localhost`                                                       |
+--------------------------------------------------------------------------------------------------------------+
```





```
drop database db1;
drop user 'user1'@'localhost';
```





#### Secure MariaDB Installation:

Run the security script to remove insecure default settings:

```
mysql_secure_installation



NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB
      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!

In order to log into MariaDB to secure it, we'll need the current
password for the root user. If you've just installed MariaDB, and
haven't set the root password yet, you should just press enter here.

Enter current password for root (enter for none): [press <ENTER> or <your_root_password>]
OK, successfully used password, moving on...

Setting the root password or using the unix_socket ensures that nobody
can log into the MariaDB root user without the proper authorisation.

You already have your root account protected, so you can safely answer 'n'.

Switch to unix_socket authentication [Y/n] Y	[Press Y]
Enabled successfully!
Reloading privilege tables..
 ... Success!


You already have your root account protected, so you can safely answer 'n'.

Change the root password? [Y/n] n		[Press n]
 ... skipping.

By default, a MariaDB installation has an anonymous user, allowing anyone
to log into MariaDB without having to have a user account created for
them.  This is intended only for testing, and to make the installation
go a bit smoother.  You should remove them before moving into a
production environment.

Remove anonymous users? [Y/n] Y		[Press Y]
 ... Success!

Normally, root should only be allowed to connect from 'localhost'.  This
ensures that someone cannot guess at the root password from the network.

Disallow root login remotely? [Y/n] Y		[Press Y]
 ... Success!

By default, MariaDB comes with a database named 'test' that anyone can
access.  This is also intended only for testing, and should be removed
before moving into a production environment.

Remove test database and access to it? [Y/n] 		[Press Y]
 - Dropping test database...
 ... Success!
 - Removing privileges on test database...
 ... Success!

Reloading the privilege tables will ensure that all changes made so far
will take effect immediately.

Reload privilege tables now? [Y/n] Y		[Press Y]
 ... Success!

Cleaning up...

All done!  If you've completed all of the above steps, your MariaDB
installation should now be secure.

Thanks for using MariaDB!

```






### Remove MariaDB Packages and 

```
dnf remove -y mariadb-server mariadb
```



_Remove MariaDB Data and Configuration Files:_

```
rm -rf /var/lib/mysql
rm -rf /etc/my.cnf /etc/my.cnf.d/
```



Now, your MariaDB server is installed and configured! 


